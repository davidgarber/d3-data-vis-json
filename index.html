<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="d3.min.js" charset="utf-8"></script>
    <title>D3</title>
  </head>
  <body>
    <script>

      var h=100;
      var w=400;
      var ds; //global variable for data
      var salesTotal=0.0;
      var salesAvg=0.0;
      var metrics=[];

      function buildLine() {
        var lineFun = d3.svg.line()
          .x(function(d) { returns((d.month-20133001)/3.25)})
          .y(function(d) {return h-d.sales;})
          .interpolate("linear");

        var svg = d3.select("body").append("svg").attr({width:w, height:h});

        var viz = svg.append("path")
                    .attr({
                      d: lineFun(ds),
                      "stroke" : "purple",
                      "stroke-width" : 2,
                      "fill" : "none"
                    });
      }

      d3.json("MonthlySales.json", function(error, data) {
        if(error) {
          console.log(error);
        } else {
          console.log(data);
          ds=data;
        }

        buildLine();
        showTotals();

      });

    </script>

  </body>
</html>
